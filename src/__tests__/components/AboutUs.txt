import { render, screen } from '@testing-library/react'
import { AboutUs } from '../../pages/aboutUs'
import { BrowserRouter } from 'react-router-dom'

test('renders About Us title', () => {
  render(<AboutUs />)
  const titleElement = screen.getByRole('heading', {
    name: /About the 9 Dudes/i,
  })
  expect(titleElement).toBeInTheDocument()
})

// test('renders all team members', () => {
//   render(<AboutUs />)
//   const teamMembers = screen.getAllByTestId('about-us-card')
//   expect(teamMembers).toHaveLength(9)
// })

describe('AboutUs component', () => {
  it('renders the AppWrapper component', () => {
    const { container } = render(<AboutUs />)
    expect(container.querySelector('.AppWrapper')).toBeInTheDocument()
  })

  it('renders the "About the 9 Dudes" title', () => {
    const { getByText } = render(
      <BrowserRouter basename='/about-us'>
        <AboutUs />
      </BrowserRouter>,
    )
    expect(getByText('About the 9 Dudes')).toBeInTheDocument()
  })

  // it('renders three rows of AboutUsCard components', () => {
  //   const { getAllByTestId } = render(<AboutUs />);
  //   const rows = getAllByTestId('about-us-row');
  //   expect(rows.length).toBe(3);
  // });

  it('uses correct Stack component props', () => {
    const { getByTestId } = render(
      <BrowserRouter basename='/about-us'>
        <AboutUs />
      </BrowserRouter>,
    )
    const stack = getByTestId('about-us-stack')
    expect(stack).toHaveStyle('direction: column')
    expect(stack).toHaveStyle('justify-content: space-evenly')
    expect(stack).toHaveStyle('align-items: center')
    expect(stack).toHaveStyle('padding-left: 145px')
    expect(stack).toHaveStyle('padding-right: 145px')
    expect(stack).toHaveStyle('padding-top: 59px')
    expect(stack).toHaveStyle('padding-bottom: 59px')
  })

  it('uses correct inner Stack component props', () => {
    const { getAllByTestId } = render(
      <BrowserRouter basename='/about-us'>
        <AboutUs />
      </BrowserRouter>,
    )
    const rows = getAllByTestId('about-us-row')
    rows.forEach((row) => {
      const innerStack = row.querySelector('.about-us-row-stack')
      expect(innerStack).toHaveStyle('direction: row')
      expect(innerStack).toHaveStyle('justify-content: space-between')
      expect(innerStack).toHaveStyle('align-items: stretch')
      expect(innerStack).toHaveStyle('padding-top: 72px')
      expect(innerStack).toHaveStyle('padding-bottom: 72px')
    })
  })

  it('renders the correct number of AboutUsCard components in each row', () => {
    const { getAllByTestId } = render(
      <BrowserRouter basename='/about-us'>
        <AboutUs />
      </BrowserRouter>,
    )
    const rows = getAllByTestId('about-us-row')
    rows.forEach((row) => {
      const cards = row.querySelectorAll('.about-us-card')
      expect(cards.length).toBe(3)
    })
  })
})
